{"ast":null,"code":"import { connect } from \"react-redux\";\nimport store from '../../store';\nimport Button from \"../../components/button\";\nimport { round, moving } from \"../../utils\";\nimport { regainMana, begin, end, setGamerName, attack, heal, changeDisplayAnimation } from '../../action';\nconst playerDiv = document.getElementById(store.getState().gamerName);\nconst monsterDiv = document.getElementById(store.getState().monsterName);\nconst firePlayer = document.getElementById('fire-' + store.getState().gamerName);\nconst fireMonster = document.getElementById('fire-' + store.getState().monsterName);\nconsole.log(firePlayer, 'fire');\n\nconst mapStateToProps = state => ({\n  displayAnimation: state.displayAnimation\n});\n\nconst mapDispatchToProps = dispatch => ({\n  regainMana: () => {\n    setTimeout(() => {\n      dispatch(regainMana());\n    }, 1000 * 1.5);\n  },\n  begin: () => {\n    const result = prompt(\"choisisez un pseudo \");\n\n    if (result) {\n      var _result$match;\n\n      let regex = /[a-zA-Z0-9]/g;\n      console.log(result, result.match(regex));\n\n      if (((_result$match = result.match(regex)) === null || _result$match === void 0 ? void 0 : _result$match.length) === result.length) {\n        dispatch(setGamerName(result.trim()));\n        dispatch(begin());\n      } else if (result.match(regex).length < result.length) {\n        alert('le speudo ne peut pas contenir de caractére spéciaux');\n      }\n    } else alert('une erreur est survenue');\n  },\n  end: () => {\n    dispatch(end());\n  },\n  attack: (value, attacker, dommage) => {\n    let manaConsume;\n    let dommageInflige;\n    value == 'attack' ? dommageInflige = round(3, 10) : dommageInflige = round(10, 15);\n    value == 'magicFire' ? manaConsume = 20 : '';\n    dispatch(changeDisplayAnimation());\n\n    if (manaConsume && store.getState().playerMana - 20 < 0) {\n      alert(\"vos n avez plus assez de mana votre sort a echouer\");\n    } else if (manaConsume && store.getState().playerMana - 20 > 0) {\n      moving(firePlayer, 'fire', 1000, 'player');\n      setTimeout(() => {\n        dispatch(attack('player', dommageInflige, manaConsume));\n      }, 1000);\n    } else if (!manaConsume) {\n      moving(playerDiv, 'draw', 1000, 'player');\n      setTimeout(() => {\n        dispatch(attack('player', dommageInflige));\n      }, 1000);\n    }\n\n    if (store.getState().monsterPv > 0) {\n      setTimeout(() => {\n        moving(monsterDiv, 'draw', 1000, 'monster');\n      }, 1000 * 1);\n      setTimeout(() => {\n        dispatch(attack('monster'));\n        dispatch(changeDisplayAnimation());\n      }, 1000 * 2);\n    }\n  },\n  heal: () => {\n    if (store.getState().playerMana - 10 < 0) {\n      alert(\"vos n avez plus assez de mana votre sort a echouer\");\n    } else if (store.getState().playerMana - 10 > 0) {\n      dispatch(heal());\n    }\n\n    setTimeout(() => {\n      dispatch(attack('monster'));\n    }, 1000 * 1.5);\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Button);","map":{"version":3,"sources":["/home/rom/Desktop/reactBulder/monster_slayer3_react/src/container/button/index.tsx"],"names":["connect","store","Button","round","moving","regainMana","begin","end","setGamerName","attack","heal","changeDisplayAnimation","playerDiv","document","getElementById","getState","gamerName","monsterDiv","monsterName","firePlayer","fireMonster","console","log","mapStateToProps","state","displayAnimation","mapDispatchToProps","dispatch","setTimeout","result","prompt","regex","match","length","trim","alert","value","attacker","dommage","manaConsume","dommageInflige","playerMana","monsterPv"],"mappings":"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","sourcesContent":["import { connect } from \"react-redux\";\nimport store from '../../store'\nimport Button from \"../../components/button\";\nimport { round, moving } from \"../../utils\";\nimport { regainMana, begin, end, setGamerName, attack, heal, changeDisplayAnimation} from '../../action'\n\nconst playerDiv: HTMLElement | null = document.getElementById(store.getState().gamerName)\nconst monsterDiv: HTMLElement | null = document.getElementById(store.getState().monsterName)\nconst firePlayer:HTMLElement | null = document.getElementById('fire-'+store.getState().gamerName)\nconst fireMonster:HTMLElement | null = document.getElementById('fire-'+store.getState().monsterName)\nconsole.log(firePlayer, 'fire')\nconst mapStateToProps = (state : any) => ({\n  displayAnimation : state.displayAnimation,\n})\nconst mapDispatchToProps = (dispatch: any) => ({ \n  \n  regainMana : () => {\n    setTimeout(()=> {\n      dispatch(regainMana())\n    }, 1000 *1.5)\n  },\n  \n  begin: () => {\n    const result = prompt(\"choisisez un pseudo \")\n    if (result) {\n      let regex = /[a-zA-Z0-9]/g \n      console.log(result, result.match(regex))\n      if (result.match(regex)?.length === result.length){\n        dispatch(setGamerName(result.trim()))\n        dispatch(begin())\n      }\n      else if (result.match(regex)!.length < result.length) {\n        alert('le speudo ne peut pas contenir de caractére spéciaux')\n      }\n    }\n    else alert('une erreur est survenue')\n  },\n  end: () => {\n      dispatch(end())\n  },\n  attack: (value: string, attacker:string, dommage:number) => {\n    let manaConsume:number | undefined\n    let dommageInflige: number\n    value== 'attack' ? dommageInflige = round(3, 10) : dommageInflige =  round(10, 15)\n    value== 'magicFire' ? manaConsume = 20 : ''\n    dispatch(changeDisplayAnimation())\n    if (manaConsume  && store.getState().playerMana -20 < 0) {\n      alert(\"vos n avez plus assez de mana votre sort a echouer\")  \n    } \n    else if ( manaConsume && store.getState().playerMana -20 > 0)  {\n      moving(firePlayer!, 'fire', 1000, 'player' )\n      setTimeout(() => {\n         dispatch(attack('player', dommageInflige, manaConsume)) \n      }, 1000)\n     }\n    else if (!manaConsume) {\n      moving(playerDiv!, 'draw', 1000, 'player')\n      setTimeout(() => {\n         dispatch(attack('player', dommageInflige)) \n      }, 1000)\n    } \n    if (store.getState().monsterPv > 0) {\n      setTimeout(()=> { \n        moving(monsterDiv!, 'draw',  1000 , 'monster')\n      }, 1000 * 1)\n      setTimeout(()=> { \n        dispatch(attack('monster'))\n        dispatch(changeDisplayAnimation())\n      }, 1000 * 2)\n    }\n  },\n\n  heal: () => {\n    if (store.getState().playerMana - 10 < 0) {\n      alert(\"vos n avez plus assez de mana votre sort a echouer\")\n    }\n    else if ((store.getState().playerMana - 10 > 0 ) ){\n       dispatch(heal())\n    }\n    setTimeout(() => {\n      dispatch(attack('monster'))\n    }, 1000 * 1.5)\n  }\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(Button)"]},"metadata":{},"sourceType":"module"}